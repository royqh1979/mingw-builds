diff -urN gcc-11.4.0.orig/gcc/gcc.c gcc-11.4.0/gcc/gcc.c
--- gcc-11.4.0.orig/gcc/gcc.c	2023-05-29 16:46:29.000000000 +0800
+++ gcc-11.4.0/gcc/gcc.c	2023-06-22 17:36:31.620193800 +0800
@@ -10201,7 +10201,7 @@
   int i;
   /* Must have exactly two arguments.  */
   if (argc != 2)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
 
   for (i = 0; i < n_infiles; i++)
     {
@@ -10222,7 +10222,7 @@
   int i;
   /* Must have exactly one argument.  */
   if (argc != 1)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
 
   for (i = 0; i < n_infiles; i++)
     {
@@ -10244,17 +10244,17 @@
 
   if (regcomp (&r, "^([1-9][0-9]*|0)(\\.([1-9][0-9]*|0))*$",
 	       REG_EXTENDED | REG_NOSUB) != 0)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
   rresult = regexec (&r, v1, 0, NULL, 0);
   if (rresult == REG_NOMATCH)
     fatal_error (input_location, "invalid version number %qs", v1);
   else if (rresult != 0)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
   rresult = regexec (&r, v2, 0, NULL, 0);
   if (rresult == REG_NOMATCH)
     fatal_error (input_location, "invalid version number %qs", v2);
   else if (rresult != 0)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
 
   return strverscmp (v1, v2);
 }
@@ -10297,7 +10297,7 @@
   if (argc < 3)
     fatal_error (input_location, "too few arguments to %%:version-compare");
   if (argv[0][0] == '\0')
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
   if ((argv[0][1] == '<' || argv[0][1] == '>') && argv[0][0] != '!')
     nargs = 2;
   if (argc != nargs + 3)
@@ -10362,7 +10362,7 @@
   char *file;
 
   if (argc != 1)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
 
   file = find_a_file (&startfile_prefixes, argv[0], R_OK, true);
   read_specs (file ? file : argv[0], false, false);
@@ -10379,7 +10379,7 @@
   const char *file;
 
   if (argc != 1)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
 
   file = find_file (argv[0]);
   return file;
@@ -10395,7 +10395,7 @@
   const char *option;
 
   if (argc != 0)
-    abort ();
+    fancy_abort (__FILE__, __LINE__, __FUNCTION__);
 
   option = concat ("-iplugindir=", find_file ("plugin"), NULL);
   return option;
diff -urN gcc-11.4.0.orig/gcc/system.h gcc-11.4.0/gcc/system.h
--- gcc-11.4.0.orig/gcc/system.h	2023-05-29 16:46:29.000000000 +0800
+++ gcc-11.4.0/gcc/system.h	2023-06-22 17:41:56.468876500 +0800
@@ -772,7 +772,9 @@
    reporting the location of the error in the source file.  */
 extern void fancy_abort (const char *, int, const char *)
 					 ATTRIBUTE_NORETURN ATTRIBUTE_COLD;
-#define abort() fancy_abort (__FILE__, __LINE__, __FUNCTION__)
+inline void abort() { 
+	fancy_abort (__FILE__, __LINE__, __FUNCTION__);
+}
 
 /* Use gcc_assert(EXPR) to test invariants.  */
 #if ENABLE_ASSERT_CHECKING
diff -urN gcc-11.4.0.orig/libcpp/system.h gcc-11.4.0/libcpp/system.h
--- gcc-11.4.0.orig/libcpp/system.h	2023-05-29 16:46:32.000000000 +0800
+++ gcc-11.4.0/libcpp/system.h	2023-06-22 17:41:28.678032600 +0800
@@ -401,7 +401,9 @@
 /* Redefine abort to report an internal error w/o coredump, and
    reporting the location of the error in the source file.  */
 extern void fancy_abort (const char *, int, const char *) ATTRIBUTE_NORETURN;
-#define abort() fancy_abort (__FILE__, __LINE__, __FUNCTION__)
+inline void abort() { 
+	fancy_abort (__FILE__, __LINE__, __FUNCTION__);
+}
 
 /* Use gcc_assert(EXPR) to test invariants.  */
 #if ENABLE_ASSERT_CHECKING
